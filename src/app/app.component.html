<app-perso [persos]="persos" [guildes]="guildes" [perso]="perso"></app-perso>
<div class="xl:pl-72">
  <section class="search">
    <div
      class="sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-6 border-b border-white/5 bg-gray-900 px-4 shadow-sm sm:px-6 lg:px-8">

      <!-- Bloc Recherche -->
      <div class="flex flex-1 gap-x-4 self-stretch lg:gap-x-6">
        <form [formGroup]="search" (submit)="onSubmit()" class="grid w-full items-center justify-center md:justify-normal md:w-1/3">
          <div class="relative w-full items-center gap-4 grid grid-cols-1 md:flex">
            <div class="w-full">
              <svg class="pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-500" viewBox="0 0 20 20"
                   fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd"
                      d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
                      clip-rule="evenodd"/>
              </svg>
              <input formControlName="name" id="search-field"
                     class="block h-full border-0 bg-transparent py-0 pl-8 pr-0 text-white focus:ring-0 sm:text-sm"
                     placeholder="Recherche..." type="search" name="search">
            </div>
            <div class="grid grid-cols-1 gap-4 w-full md:flex">
              <label for="royaume" class="sr-only">Royaume</label>
              <select formControlName="region" id="royaume" name="location"
                      class="block rounded-md bg-white border border-gray-300 py-1.5 pl-3 pr-10 text-gray-500 ring-1 ring-inset ring-gray-300 w-full md:w-1/3 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6">
                <option value="us">US</option>
                <option value="eu" selected>EU</option>
              </select>

              <div class="relative flex-1">
                <input type="text" formControlName="realm" placeholder="Royaume"
                       class="w-full rounded-md border border-gray-300 p-2 focus:outline-none focus:border-blue-500"
                       (input)="filterRealms($event)">
                <ul *ngIf="filteredRealms.length > 0"
                    class="absolute z-10 w-full bg-white text-gray-500 rounded-md shadow-md mt-2">
                  <li *ngFor="let realm of filteredRealms" class="cursor-pointer px-4 py-2 hover:bg-gray-200"
                      (click)="realmSelected(realm)">{{ realm }}</li>
                </ul>
              </div>
            </div>

            <button
              class="rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">
              Rechercher
            </button>
          </div>
        </form>
      </div>
      <!-- Bloc Recherche -->
    </div>
  </section>


  <main class="container">
    <header class="flex items-center justify-between border-b border-white/5 px-4 py-4 sm:px-6 sm:py-6 lg:px-8">
      <h1 class="text-base font-semibold leading-7 text-white">{{ title }}</h1>
    </header>
    <router-outlet></router-outlet>
  </main>
</div>

